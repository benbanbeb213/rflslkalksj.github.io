<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Case Closed - Watch</title>
<link rel="stylesheet" href="player.css">
</head>

<body class="watch-body">

<div class="watch-container">

    <div class="video-area">
        <video id="video" class="video" autoplay></video>

        <div class="controls">

            <button id="playBtn" class="control-btn">⏵</button>

            <div class="timeline">
                <input id="seekBar" type="range" min="0" max="100" value="0">
            </div>

            <div class="time-display">
                <span id="currentTime">0:00</span> / 
                <span id="totalTime">0:00</span>
            </div>

            <input id="volumeSlider" type="range" min="0" max="1" step="0.01" value="1" class="volume-slider">

            <button id="fullscreenBtn" class="control-btn">⛶</button>
            <button id="nextEpBtn" class="control-btn next-btn">Next ▶</button>

        </div>
    </div>

    <div class="episode-list">
        <h2>Episodes</h2>
        <div class="episodes">
            <button onclick="loadEp(1)">1</button>
            <button onclick="loadEp(2)">2</button>
            <button onclick="loadEp(3)">3</button>
            <button onclick="loadEp(4)">4</button>
            <button onclick="loadEp(5)">5</button>
        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
// EPISODE LINKS
const eps = {
    1: "https://rrr.hub26link.site/pkpk/c5/h6a90f70b8d237f94866b6cfc2c6349bddedc7dc1328a916ba76c347576a168b0f558899eb0e27ac0c102a43593dab20563433f013ccb0bbe198bcdd60ebb5bf2/list,Ktm0Vt9-cJyXbGG_O3gV_5vGK-kpiQ.m3u8",

    2: "https://rrr.pro25zone.site/p83e/c5/h6a90f70b8d237f94866b6cfc2c7906afdb8423c6639e9e32f0742e3037b160b4eb5c9d8cb9be75c7c50ae72297d2e44d3b0879042c960fe70a8ac89d53a146e35d/list,Ktm0Vt9-cJyXbGG_O3gV_5vGK-kpiQ.m3u8",

    3: "https://hlsx3cdn.echovideo.to/detective-conan-remastered/3/master.m3u8",

    4: "https://rrr.shop21pro.site/p5qm/c5/h6a90f70b8d237f94866b6cfc2a6349bddedc7dc1328a916ba73537752bfe76aff60e899eb0e27ac0c102a43593daec046543241c31890fe30097c9d60ebb5bf2/list,Ktm0Vt9-cJyXbGG_O3gV_5vGK-kpiQ.m3u8",

    5: "https://rrr.net22lab.site/pmjz/c5/h6a90f70b8d237f94866b6cfc2b6349bddedc7dc1328a9167a73d28752dfe68ace85c899eb0e27ac0c102a43593dab41f724339112acb0fbe1187888b14a64a/list,Ktm0Vt9-cJyXbGG_O3gV_5vGK-kpiQ.m3u8"
};

let hls;
let currentEp = 1;

const video = document.getElementById("video");
const playBtn = document.getElementById("playBtn");
const seekBar = document.getElementById("seekBar");
const currentTimeDisplay = document.getElementById("currentTime");
const totalTimeDisplay = document.getElementById("totalTime");
const volumeSlider = document.getElementById("volumeSlider");
const fullscreenBtn = document.getElementById("fullscreenBtn");
const nextEpBtn = document.getElementById("nextEpBtn");

function loadEp(ep){
    currentEp = ep;
    const url = eps[ep];

    if (hls) hls.destroy();

    if (Hls.isSupported()) {
        hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(video);
    } else {
        video.src = url;
    }
}
loadEp(1);

playBtn.onclick = () => {
    if (video.paused){
        video.play();
        playBtn.textContent = "⏸";
    } else {
        video.pause();
        playBtn.textContent = "⏵";
    }
};

video.addEventListener("timeupdate", () => {
    seekBar.value = (video.currentTime / video.duration) * 100;
    currentTimeDisplay.textContent = format(video.currentTime);
    totalTimeDisplay.textContent = format(video.duration);
});

seekBar.oninput = () => {
    video.currentTime = (seekBar.value / 100) * video.duration;
};

volumeSlider.oninput = () => video.volume = volumeSlider.value;

fullscreenBtn.onclick = () =>
    !document.fullscreenElement ? video.requestFullscreen() : document.exitFullscreen();

nextEpBtn.onclick = () => {
    if (eps[currentEp + 1]) loadEp(currentEp + 1);
};

video.onended = () => {
    if (eps[currentEp + 1]){
        loadEp(currentEp + 1);
        setTimeout(() => video.play(), 200);
    }
};

function format(t){
    if (!t) return "0:00";
    let m = Math.floor(t / 60);
    let s = Math.floor(t % 60).toString().padStart(2, "0");
    return `${m}:${s}`;
}
</script>

</body>
</html>
